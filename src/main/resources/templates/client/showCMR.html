<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="shortcut icon" href="/img/logo.png" type="image/x-icon">

</head>
<div th:insert="blocks/links :: div"></div>
<body style="background-color: #f2f0f8">
<div th:insert="blocks/header :: header"></div>
<div th:insert="blocks/clientSidebare :: clientSidebare"></div>
<main>
  <div class="col-md-7 col-lg-8" style=" margin-left: 27%; ">
    <h4 class="mb-3" style="color: #814de5"> Просмотр CMR</h4>
      <div style="height: 200px; width: 945px;  border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%">
        <h5 style="margin-left: 1%">1 Отправитель</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">ИНН/КПП</h5>
              <span th:text="${crm.sender.taxId}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Название организации</h5>
              <span th:text="${crm.sender.organizationName}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Страна</h5>
              <span th:text="${crm.sender.address.city}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c; margin-left: -1%">Почтовый код</h5>
              <span th:text="${crm.sender.address.postalCode}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Область</h5>
              <span th:text="${crm.sender.address.settlement}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Населённый пункт</h5>
              <span th:text="${crm.sender.address.region}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Дом</h5>
              <span th:text="${crm.sender.address.build}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c;">ОГРН</h5>
              <span th:text="${crm.sender.address.ogrnNumber}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 200px; width: 945px;  border-color: #814de5; border-style: solid;; border-radius: 10px; margin-top: 2%">
        <h5 style="margin-left: 1%">2 Получатель</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">ИНН/КПП</h5>
              <span th:text="${crm.resipient.taxId}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Название организации</h5>
              <span th:text="${crm.resipient.organizationName}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Страна</h5>
              <span th:text="${crm.resipient.address.city}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c; margin-left: -1%">Почтовый код</h5>
              <span th:text="${crm.resipient.address.postalCode}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Область</h5>
              <span th:text="${crm.resipient.address.settlement}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Населённый пункт</h5>
              <span th:text="${crm.resipient.address.region}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Дом</h5>
              <span th:text="${crm.resipient.address.build}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c;">ОГРН</h5>
              <span th:text="${crm.resipient.address.ogrnNumber}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 200px; width: 945px; border-color: #814de5; border-style: solid;; border-radius: 10px; margin-top: 2%">
        <h5 style="margin-left: 1%">3 Место разгрузки</h5>
        <div style="margin-left: 2%; margin-top: -2%">

          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Страна</h5>
              <span th:text="${crm.countryWH}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Город</h5>
              <span th:text="${crm.cityWH}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Улица</h5>
              <span th:text="${crm.streetWH}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Номер дома</h5>
              <span th:text="${crm.houseNumberWH}"></span>
            </div>
          </div>

        </div>
      </div>

      <div style="height: 200px; width: 945px; border-color: #814de5; border-style: solid;; border-radius: 10px; margin-top: 2%">
        <h5 style="margin-left: 1%">4 Место и дата погрузки</h5>
        <div style="margin-left: 2%; margin-top: -2%">

          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Страна</h5>
              <span th:text="${crm.loadingCountry}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Город</h5>
              <span th:text="${crm.loadingCity}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Улица</h5>
              <span th:text="${crm.loadingStreet}"></span>
            </div>

            <div class="col-sm-2">
              <h5 class="form-h5" style="color: #1a1a1c">Номер дома</h5>
              <span th:text="${crm.loadingHouseNumber}"></span>
            </div>


            <div class="col-sm-4">
              <h5 class="form-h5" style="color: #1a1a1c">Дата погрузки</h5>
              <span th:text="${crm.loadingDate}"></span>
            </div>

        </div>
      </div>

      <div style="height: 350px; width: 945px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 13%">
        <h5 style="margin-left: 1%">5 Прилагаемые документы</h5>
        <div style="margin-left: 2%; margin-top: -2%">

          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Счет-фактура (invoice)</h5>
              <span th:text="${crm.invoiceDocument}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Отгрузочная спецификация</h5>
              <span th:text="${crm.shippingSpecificationDocument}"></span>
            </div>
          </div>

          <div class="row" style="margin-top: 5px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Сертификат качества</h5>
              <span th:text="${crm.qualityCertificateDocument}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Ветеринарный сертификат</h5>
              <span th:text="${crm.veterinaryCertificateDocument}"></span>
            </div>
          </div>

          <div class="row" style="margin-top: 5px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Карантинный сертификат</h5>
              <span th:text="${crm.quarantineCertificateDocument}"></span>
            </div>

            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Сертификат о происхождении</h5>
              <span th:text="${crm.certificateOfOriginDocument}"></span>
            </div>
          </div>

          <div class="row" style="margin-top: 5px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Акт загрузки</h5>
              <span th:text="${crm.loadingCertificateDocument}"></span>
            </div>
          </div>

        </div>
      </div>

      <div style="height: 200px; width: 945px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%">
        <h5 style="margin-left: 1%">6-9</h5>
        <div class="row" style="margin-left: 2%; margin-top:  1%;">
          <div class="col-sm-6">
            <h5 class="form-h5" style="color: #1a1a1c">Количество грузовых мест</h5>
            <span th:text="${crm.cargoQuantity}"></span>
          </div>

          <div class="col-sm-6">
            <h5 class="form-h5" style="color: #1a1a1c">Наименование груза</h5>
            <span th:text="${crm.cargoName}"></span>
          </div>
        </div>

        <div class="row" style="margin-left: 2%; ">
          <div class="col-sm-6">
            <h5 class="form-h5" style="color: #1a1a1c">Род упаковки</h5>
            <span th:text="${crm.nackagingType}"></span>
          </div>

          <div class="col-sm-6">
            <h5 class="form-h5" style="color: #1a1a1c">Номера</h5>
            <span th:text="${crm.numbers}"></span>
          </div>
        </div>
      </div>

      <div style="display: flex; flex-wrap: wrap; width: 950px">

        <div style="height: 100px; width: 310px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%; margin-right: 10px;">
          <h5 style="margin-left: 1%">10 Статистический код</h5>
          <div style="margin-left: 2%; margin-top: -2%">
            <div class="row" style="margin-top: 20px;">
              <div class="col-sm-11">
                <span th:text="${crm.statistikCode}"></span>
              </div>
            </div>
          </div>
        </div>

        <div style="height: 100px; width: 310px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%; margin-right: 10px;">
          <h5 style="margin-left: 1%">11 Суммарный вес брутто</h5>
          <div style="margin-left: 2%; margin-top: -2%">
            <div class="row" style="margin-top: 20px;">
              <div class="col-sm-11">
                <span th:text="${crm.grossWeight}"></span>
              </div>
            </div>
          </div>
        </div>

        <div style="height: 100px; width: 310px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: -100px; margin-left: 640px;">
          <h5 style="margin-left: 1%">12 Объем</h5>
          <div style="margin-left: 2%; margin-top: -2%">
            <div class="row" style="margin-top: 20px;">
              <div class="col-sm-11">
                <span th:text="${crm.volume}"></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 300px; width: 950px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%;">
        <h5 style="margin-left: 1%">13 Таможенная обработка</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-4">
              <h5 class="form-h5" style="color: #1a1a1c">Название таможенного поста</h5>
              <span th:text="${crm.customsProcessing.customsPostName}"></span>
            </div>
            <div class="col-sm-4">
              <h5 class="form-h5" style="color: #1a1a1c">Код таможни</h5>
              <span th:text="${crm.customsProcessing.customsCode}"></span>
            </div>
          </div>
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-12">
              <h5 class="form-h5" style="color: #1a1a1c">Юридическое название СВХ и его адрес</h5>
              <span th:text="${crm.customsProcessing.svhNameAndAddress}"></span>
            </div>
          </div>
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-4">
              <h5 class="form-h5" style="color: #1a1a1c">Номер лицензии</h5>
              <span th:text="${crm.customsProcessing.licenseNumber}"></span>
            </div>
            <div class="col-sm-4">
              <h5 class="form-h5" style="color: #1a1a1c">Дата выдачи</h5>
              <span th:text="${crm.customsProcessing.issueDate}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 200px; width: 950px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%;">
        <h5 style="margin-left: 1%">14 Возврат</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Страна</h5>
              <span th:text="${crm.returnCountry}"></span>
            </div>
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Город</h5>
              <span th:text="${crm.returnCity}"></span>
            </div>
          </div>
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Улица</h5>
              <span th:text="${crm.returnStreet}"></span>
            </div>
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Дом</h5>
              <span th:text="${crm.returnHouse}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 125px; width: 950px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%;">
        <h5 style="margin-left: 1%">15 Условия оплаты</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-12">
              <h5 class="form-h5" style="color: #1a1a1c">Условия оплаты</h5>
              <span th:text="${crm.paymentTerms}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 200px; width: 945px;  border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%">
        <h5 style="margin-left: 1%">16 Перевозчик</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">ИНН/КПП</h5>
              <span th:text="${crm.carrier.taxId}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Название организации</h5>
              <span th:text="${crm.carrier.organizationName}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Страна</h5>
              <span th:text="${crm.carrier.address.city}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c; margin-left: -1%">Почтовый код</h5>
              <span th:text="${crm.carrier.address.postalCode}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Область</h5>
              <span th:text="${crm.carrier.address.region}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Населённый пункт</h5>
              <span th:text="${crm.carrier.address.settlement}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Дом</h5>
              <span th:text="${crm.carrier.address.build}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c;">ОГРН</h5>
              <span th:text="${crm.carrier.address.ogrnNumber}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 200px; width: 945px;  border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%">
        <h5 style="margin-left: 1%">17 Последующий перевозчик</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">ИНН/КПП</h5>
              <span th:text="${crm.subsequentCarrier.taxId}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Название организации</h5>
              <span th:text="${crm.subsequentCarrier.organizationName}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Страна</h5>
              <span th:text="${crm.subsequentCarrier.address.city}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c; margin-left: -1%">Почтовый код</h5>
              <span th:text="${crm.subsequentCarrier.address.postalCode}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Область</h5>
              <span th:text="${crm.subsequentCarrier.address.region}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Населённый пункт</h5>
              <span th:text="${crm.subsequentCarrier.address.settlement}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c">Дом</h5>
              <span th:text="${crm.subsequentCarrier.address.build}"></span>
            </div>

            <div class="col-sm-3">
              <h5 class="form-h5" style="color: #1a1a1c;">ОГРН</h5>
              <span th:text="${crm.subsequentCarrier.address.ogrnNumber}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 300px; width: 950px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%;">
        <h5 style="margin-left: 1%">18 Оговорки и замечания перевозчика</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-12">
              <h5 class="form-h5" style="color: #1a1a1c">Оговорки и замечания</h5>
              <span th:text="${crm.carrierNotes}"></span>
            </div>
          </div>
        </div>
      </div>

      <div style="width: 950px; display: flex; justify-content: space-between; margin-top: 2%;">
        <div style="height: 110px; width: 450px; border-color: #814de5; border-style: solid; border-radius: 10px;">
          <h5 style="margin-left: 1%">19 Дата получения груза</h5>
          <div style="margin-left: 2%; margin-top: -5%">
            <div class="row" style="margin-top: 20px;">
              <div class="col-sm-12">
                <h5 class="form-h5" style="color: #1a1a1c">Дата получения</h5>
                <span th:text="${crm.cargoReceivedDate}"></span>
              </div>
            </div>
          </div>
        </div>

        <div style="height: 110px; width: 450px; border-color: #814de5; border-style: solid; border-radius: 10px;">
          <h5 style="margin-left: 1%">20 Дата заполнения СМR</h5>
          <div style="margin-left: 2%; margin-top: -5%">
            <div class="row" style="margin-top: 20px;">
              <div class="col-sm-12">
                <h5 class="form-h5" style="color: #1a1a1c">Дата заполнения</h5>
                <span th:text="${crm.cmrFilledDate}"></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 125px; width: 950px; border-color: #814de5; border-style: solid; border-radius: 10px; margin-top: 2%;">
        <h5 style="margin-left: 1%">21. Регистрационные номера</h5>
        <div style="margin-left: 2%; margin-top: -2%">
          <div class="row" style="margin-top: 20px;">
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Регистрационный номер тягача</h5>
              <span th:text="${crm.tractorRegistrationNumber}"></span>
            </div>
            <div class="col-sm-6">
              <h5 class="form-h5" style="color: #1a1a1c">Регистрационный номер прицепа</h5>
              <span th:text="${crm.trailerRegistrationNumber}"></span>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-center" style="margin-top: 20px; margin-left: 40px ">
        <button class="btn  " type="submit" style="width: 1000px; background-color: #814de5; color: #1a1a1c; " onclick="window.location.href='/client/showListCMR'">ОК</button>
      </div>
      </div>
  </div>
<!--  <div class="modal fade" id="myModal" tabindex="-1" aria-h5ledby="createRequestModalh5" aria-hidden="true">-->
<!--    <div class="modal-dialog">-->
<!--      <div class="modal-content">-->

<!--        <div class="modal-body">-->
<!--          <h5 class="h5" style="color: #1a1a1c;">Выберите поставщика</h5>-->
<!--          <select th:if="${supplier}" class="form-select" id="supplier" required>-->
<!--            <option th:each="sup:${supplier}" th:value="${sup.idSupplier}" th:text="${sup.organizationName}"/>-->
<!--          </select>-->
<!--          <button class="btn" type="button" id="selectButton" style="display: block; background-color: #814de5; color: #1a1a1c; margin: 0 auto; margin-top: 20px;" >Выбрать</button>-->

<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <script src="/js/model.js"></script>
  <script src="/js/main.js"></script>
  <script>
    document.getElementById('addCRM').addEventListener('submit', function (event) {
      event.preventDefault();
      fetch('/client/addCRM', {
        method: 'POST',
        body: new FormData(this)
      })
              .then(response => response.json())
              .then(data => {
                if (data.status === "success") {
                  alert(data.message);
                  window.location.href = '/client/addCRM';
                } else if (data.status === "bad") {
                  alert(data.message);
                } else {
                  console.error('Произошла ошибка:', data.message);
                }
              })
    });
  </script>
</main>

</body>
<script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
  document.getElementById('formAddCRM').addEventListener('submit', async function(event) {
    event.preventDefault(); // Остановка автоматической отправки формы

    var form = document.getElementById('formAddCRM');
    var formData = new FormData(form);

    await fetch('/client/addCRM', {

      method: 'POST',
      body: formData
    })
            .then(response => response.json())
            .then(data => {
              if (data.status === "success") {
                alert(data.message);
                window.location.href = '/client/regOfDeclaration';
              } else if (data.status === "bad") {
                for (const x in data) {
                  if (x!="bad"){
                    alert(data[x]);
                  }}
              }
              else {
                console.error('Произошла ошибка:', data.message);
              }
            });
  });
</script>
</html>

